<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<div class="container mt-4">
  <!-- Header -->
  <div class="card shadow-sm mb-4">
    <div class="card-body bg-gradient text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
      <h2 class="display-6 mb-2">
        <i class="bi bi-activity me-2"></i>System Status
      </h2>
      <p class="mb-0 opacity-75">Monitor system health and performance metrics</p>
    </div>
  </div>

  <!-- Overall Status Badge -->
  <div class="alert alert-success d-flex align-items-center mb-4" role="alert" *ngIf="status">
    <i class="bi bi-check-circle-fill me-3 fs-3"></i>
    <div>
      <h5 class="alert-heading mb-1">All Systems Operational</h5>
      <p class="mb-0">All services are running normally</p>
    </div>
  </div>

  <div *ngIf="status">
    <!-- System Metrics Cards -->
    <div class="row g-4 mb-4">
      <!-- Uptime Card -->
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <div>
                <h6 class="text-muted mb-0">Uptime</h6>
                <h3 class="mb-0 mt-2">{{ status.uptime }}</h3>
              </div>
              <div class="bg-primary bg-opacity-10 p-3 rounded">
                <i class="bi bi-clock-history text-primary fs-3"></i>
              </div>
            </div>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar bg-success" style="width: 100%"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- CPU Usage Card -->
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <div>
                <h6 class="text-muted mb-0">CPU Usage</h6>
                <h3 class="mb-0 mt-2">{{ status.cpu }}%</h3>
              </div>
              <div class="bg-success bg-opacity-10 p-3 rounded">
                <i class="bi bi-cpu text-success fs-3"></i>
              </div>
            </div>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" 
                   [class.bg-success]="status.cpu < 60"
                   [class.bg-warning]="status.cpu >= 60 && status.cpu < 80"
                   [class.bg-danger]="status.cpu >= 80"
                   [style.width.%]="status.cpu"></div>
            </div>
            <small class="text-muted">{{ status.cpu < 60 ? 'Optimal' : status.cpu < 80 ? 'Moderate' : 'High' }}</small>
          </div>
        </div>
      </div>

      <!-- Memory Usage Card -->
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <div>
                <h6 class="text-muted mb-0">Memory Usage</h6>
                <h3 class="mb-0 mt-2">{{ status.memory }} MB</h3>
              </div>
              <div class="bg-info bg-opacity-10 p-3 rounded">
                <i class="bi bi-memory text-info fs-3"></i>
              </div>
            </div>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar bg-info" 
                   [style.width.%]="(status.memory / 8192) * 100"></div>
            </div>
            <small class="text-muted">of 8192 MB</small>
          </div>
        </div>
      </div>

      <!-- API Latency Card -->
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <div>
                <h6 class="text-muted mb-0">API Latency</h6>
                <h3 class="mb-0 mt-2">{{ status.apiLatency }} ms</h3>
              </div>
              <div class="bg-warning bg-opacity-10 p-3 rounded">
                <i class="bi bi-speedometer2 text-warning fs-3"></i>
              </div>
            </div>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar bg-success" 
                   [style.width.%]="Math.min((status.apiLatency / 1000) * 100, 100)"></div>
            </div>
            <small class="text-muted">{{ status.apiLatency < 200 ? 'Fast' : status.apiLatency < 500 ? 'Normal' : 'Slow' }}</small>
          </div>
        </div>
      </div>

      <!-- Background Jobs Card -->
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <div>
                <h6 class="text-muted mb-0">Background Jobs</h6>
                <h3 class="mb-0 mt-2">{{ status.jobs }}</h3>
              </div>
              <div class="bg-secondary bg-opacity-10 p-3 rounded">
                <i class="bi bi-stack text-secondary fs-3"></i>
              </div>
            </div>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar bg-secondary" 
                   [style.width.%]="(status.jobs / 100) * 100"></div>
            </div>
            <small class="text-muted">Active processes</small>
          </div>
        </div>
      </div>

      <!-- Server Health Card -->
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <div>
                <h6 class="text-muted mb-0">Server Health</h6>
                <h3 class="mb-0 mt-2">Healthy</h3>
              </div>
              <div class="bg-success bg-opacity-10 p-3 rounded">
                <i class="bi bi-heart-pulse text-success fs-3"></i>
              </div>
            </div>
            <div class="d-flex gap-2">
              <span class="badge bg-success">Database</span>
              <span class="badge bg-success">API</span>
              <span class="badge bg-success">Cache</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Detailed Status Table -->
    <div class="card shadow-sm">
      <div class="card-header bg-light">
        <h5 class="mb-0">
          <i class="bi bi-list-ul me-2 text-primary"></i>Detailed Metrics
        </h5>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead class="table-light">
              <tr>
                <th><i class="bi bi-tag me-2"></i>Metric</th>
                <th><i class="bi bi-bar-chart me-2"></i>Value</th>
                <th><i class="bi bi-check-circle me-2"></i>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="fw-bold">System Uptime</td>
                <td>{{ status.uptime }}</td>
                <td><span class="badge bg-success">Excellent</span></td>
              </tr>
              <tr>
                <td class="fw-bold">CPU Usage</td>
                <td>{{ status.cpu }}%</td>
                <td>
                  <span class="badge" 
                        [class.bg-success]="status.cpu < 60"
                        [class.bg-warning]="status.cpu >= 60 && status.cpu < 80"
                        [class.bg-danger]="status.cpu >= 80">
                    {{ status.cpu < 60 ? 'Optimal' : status.cpu < 80 ? 'Moderate' : 'High' }}
                  </span>
                </td>
              </tr>
              <tr>
                <td class="fw-bold">Memory Usage</td>
                <td>{{ status.memory }} MB</td>
                <td><span class="badge bg-info">Normal</span></td>
              </tr>
              <tr>
                <td class="fw-bold">API Response Time</td>
                <td>{{ status.apiLatency }} ms</td>
                <td>
                  <span class="badge" 
                        [class.bg-success]="status.apiLatency < 200"
                        [class.bg-warning]="status.apiLatency >= 200 && status.apiLatency < 500"
                        [class.bg-danger]="status.apiLatency >= 500">
                    {{ status.apiLatency < 200 ? 'Fast' : status.apiLatency < 500 ? 'Normal' : 'Slow' }}
                  </span>
                </td>
              </tr>
              <tr>
                <td class="fw-bold">Active Background Jobs</td>
                <td>{{ status.jobs }}</td>
                <td><span class="badge bg-secondary">Running</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="!status" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3 text-muted">Loading system status...</p>
  </div>
</div>