<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<div class="container mt-4">
  <!-- Header -->
  <div class="card shadow-sm mb-4">
    <div class="card-body bg-gradient text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
      <h2 class="display-6 mb-2">
        <i class="bi bi-folder2-open me-2"></i>File Manager
      </h2>
      <p class="mb-0 opacity-75">Upload, manage, and organize your files</p>
    </div>
  </div>

  <!-- Upload Section -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-light">
      <h5 class="mb-0">
        <i class="bi bi-cloud-upload me-2 text-primary"></i>Upload Files
      </h5>
    </div>
    <div class="card-body">
      <div class="row align-items-end">
        <div class="col-md-8">
          <label for="fileUpload" class="form-label fw-bold">
            <i class="bi bi-file-earmark-arrow-up me-2"></i>Select File
          </label>
          <input 
            type="file" 
            class="form-control" 
            id="fileUpload"
            (change)="onFileSelected($event)" 
            multiple />
          <small class="text-muted d-block mt-2">
            <i class="bi bi-info-circle me-1"></i>
            Maximum file size: 50MB. You can select multiple files.
          </small>
        </div>
        <div class="col-md-4">
          <button (click)="uploadFile()" class="btn btn-primary w-100" [disabled]="!selectedFile">
            <i class="bi bi-upload me-2"></i>Upload File
          </button>
        </div>
      </div>

      <!-- Upload Progress -->
      <div class="mt-3" *ngIf="uploadProgress > 0 && uploadProgress < 100">
        <label class="form-label">Upload Progress</label>
        <div class="progress" style="height: 25px;">
          <div class="progress-bar progress-bar-striped progress-bar-animated" 
               role="progressbar" 
               [style.width.%]="uploadProgress"
               [attr.aria-valuenow]="uploadProgress"
               aria-valuemin="0" 
               aria-valuemax="100">
            {{ uploadProgress }}%
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Storage Stats -->
  <div class="row g-4 mb-4">
    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <i class="bi bi-files display-4 text-primary"></i>
          <h4 class="mt-2">{{ files.length }}</h4>
          <p class="text-muted mb-0">Total Files</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <i class="bi bi-hdd display-4 text-success"></i>
          <h4 class="mt-2">2.4 GB</h4>
          <p class="text-muted mb-0">Storage Used</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <i class="bi bi-hdd-stack display-4 text-info"></i>
          <h4 class="mt-2">7.6 GB</h4>
          <p class="text-muted mb-0">Available Space</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <i class="bi bi-calendar-check display-4 text-warning"></i>
          <h4 class="mt-2">Today</h4>
          <p class="text-muted mb-0">Last Upload</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Files List -->
  <div class="card shadow-sm">
    <div class="card-header bg-light d-flex justify-content-between align-items-center">
      <h5 class="mb-0">
        <i class="bi bi-folder me-2 text-primary"></i>My Files
      </h5>
      <div class="btn-group btn-group-sm" role="group">
        <button type="button" class="btn btn-outline-primary active">
          <i class="bi bi-list-ul"></i> List
        </button>
        <button type="button" class="btn btn-outline-primary">
          <i class="bi bi-grid-3x3"></i> Grid
        </button>
      </div>
    </div>
    <div class="card-body p-0">
      <!-- Search and Filter -->
      <div class="p-3 bg-light border-bottom">
        <div class="row g-2">
          <div class="col-md-6">
            <div class="input-group">
              <span class="input-group-text bg-white">
                <i class="bi bi-search"></i>
              </span>
              <input type="text" class="form-control" placeholder="Search files...">
            </div>
          </div>
          <div class="col-md-3">
            <select class="form-select">
              <option selected>All Types</option>
              <option>Documents</option>
              <option>Images</option>
              <option>Videos</option>
              <option>Archives</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-select">
              <option selected>Sort by Date</option>
              <option>Sort by Name</option>
              <option>Sort by Size</option>
            </select>
          </div>
        </div>
      </div>

      <!-- File List -->
      <ul class="list-group list-group-flush">
        <li *ngFor="let file of files; let i = index" 
            class="list-group-item d-flex justify-content-between align-items-center py-3"
            [class.bg-light]="i % 2 === 0">
          <div class="d-flex align-items-center flex-grow-1">
            <!-- File Icon -->
            <div class="me-3">
              <div class="bg-primary bg-opacity-10 rounded p-3">
                <i class="bi fs-3 text-primary" 
                   [class.bi-file-earmark-text]="getFileType(file) === 'document'"
                   [class.bi-file-earmark-image]="getFileType(file) === 'image'"
                   [class.bi-file-earmark-play]="getFileType(file) === 'video'"
                   [class.bi-file-earmark-zip]="getFileType(file) === 'archive'"
                   [class.bi-file-earmark]="getFileType(file) === 'other'"></i>
              </div>
            </div>
            <!-- File Info -->
            <div class="flex-grow-1">
              <h6 class="mb-1">{{ file }}</h6>
              <small class="text-muted">
                <i class="bi bi-calendar3 me-1"></i>Uploaded: {{ getCurrentDate() | date:'short' }}
                <span class="mx-2">•</span>
                <i class="bi bi-hdd me-1"></i>Size: {{ getRandomSize() }}
              </small>
            </div>
          </div>
          <!-- Actions -->
          <div class="btn-group" role="group">
            <button (click)="downloadFile(file)" 
                    class="btn btn-sm btn-outline-success" 
                    title="Download">
              <i class="bi bi-download"></i>
            </button>
            <button class="btn btn-sm btn-outline-primary" 
                    title="Share">
              <i class="bi bi-share"></i>
            </button>
            <button class="btn btn-sm btn-outline-info" 
                    title="Info">
              <i class="bi bi-info-circle"></i>
            </button>
            <button (click)="deleteFile(file)" 
                    class="btn btn-sm btn-outline-danger" 
                    title="Delete">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </li>
      </ul>

      <!-- Empty State -->
      <div *ngIf="files.length === 0" class="text-center py-5">
        <i class="bi bi-folder-x display-1 text-muted"></i>
        <h5 class="text-muted mt-3">No Files Found</h5>
        <p class="text-muted">Upload your first file to get started</p>
        <button class="btn btn-primary mt-2" onclick="document.getElementById('fileUpload').click()">
          <i class="bi bi-upload me-2"></i>Upload File
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="card-footer bg-light" *ngIf="files.length > 0">
      <div class="d-flex justify-content-between align-items-center">
        <small class="text-muted">{{ files.length }} file(s) • 2.4 GB total</small>
        <button class="btn btn-sm btn-outline-danger">
          <i class="bi bi-trash me-1"></i>Delete Selected
        </button>
      </div>
    </div>
  </div>
</div>